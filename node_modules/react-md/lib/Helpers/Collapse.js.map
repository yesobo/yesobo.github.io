{"version":3,"sources":["../../src/js/Helpers/Collapse.js"],"names":["Collapse","props","_setHeight","child","_child","ref","height","paddingTop","paddingBottom","node","cs","window","getComputedStyle","offsetHeight","parseInt","getPropertyValue","Math","max","minHeight","setState","collapsed","state","initialOpen","nextProps","value","config","min","nextValue","children","defaultStyle","motionStyle","style","springConfig","animate","_spring","only","nextStyle","overflow","propTypes","object","bool","isRequired","element","number","defaultProps","precision"],"mappings":"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","file":"Collapse.js","sourcesContent":["import React, { PureComponent, Children, cloneElement } from 'react';\nimport PropTypes from 'prop-types';\nimport { findDOMNode } from 'react-dom';\nimport { Motion, spring } from 'react-motion';\n\n/**\n * The `Collapse` component is used to animate a single child entering\n * or leaving. This uses the `react-motion` library to animate the height,\n * padding-top, and padding-bottom of an element when the `collapsed` prop\n * changes.\n */\nexport default class Collapse extends PureComponent {\n  static propTypes = {\n    /**\n     * An optional style to merge with the `Motion` style.\n     */\n    style: PropTypes.object,\n\n    /**\n     * An optional default style to merge with the `Motion` default style.\n     */\n    defaultStyle: PropTypes.object,\n\n    /**\n     * Boolean if the children are currently collapsed.\n     */\n    collapsed: PropTypes.bool.isRequired,\n\n    /**\n     * A single child to collapse or expand.\n     */\n    children: PropTypes.element.isRequired,\n\n    /**\n     * The spring config to use for the animation.\n     */\n    springConfig: PropTypes.object.isRequired,\n\n    /**\n     * Boolean if the single child entering or leaving should be animated.\n     */\n    animate: PropTypes.bool,\n\n    /**\n     * The min height to apply for the collapse div.\n     */\n    minHeight: PropTypes.number.isRequired,\n  };\n\n  static defaultProps = {\n    animate: true,\n    springConfig: {\n      precision: 0.5,\n    },\n    minHeight: 0,\n  };\n\n  constructor(props) {\n    super(props);\n\n    if (!props.collapsed) {\n      this.state = { initialOpen: true };\n    } else {\n      this.state = {\n        height: props.minHeight,\n        paddingTop: 0,\n        paddingBottom: 0,\n      };\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.state.initialOpen && nextProps.collapsed) {\n      this.setState({ initialOpen: false });\n    }\n  }\n\n  _spring(collapsed, initialOpen, value, config, min = 0) {\n    const nextValue = !collapsed ? Math.max(min, value) : min;\n    if (initialOpen && !collapsed) {\n      return nextValue;\n    }\n\n    return spring(nextValue, config);\n  }\n\n  _setHeight = (child) => {\n    if (this._child && typeof this._child.ref === 'function') {\n      this._child.ref(child);\n    }\n\n    let height = 0;\n    let paddingTop = 0;\n    let paddingBottom = 0;\n    if (child !== null) {\n      const node = findDOMNode(child);\n      const cs = window.getComputedStyle(node);\n      height = node.offsetHeight;\n      paddingTop = parseInt(cs.getPropertyValue('padding-top'), 10);\n      paddingBottom = parseInt(cs.getPropertyValue('padding-bottom'), 10);\n    }\n\n    height = Math.max(this.props.minHeight, height);\n\n    this.setState({ height, paddingTop, paddingBottom });\n  };\n\n  render() {\n    const { height, paddingTop, paddingBottom, initialOpen } = this.state;\n    const {\n      children,\n      collapsed,\n      defaultStyle,\n      style: motionStyle,\n      springConfig,\n      animate,\n      minHeight,\n    } = this.props;\n\n    if (!animate) {\n      return collapsed ? null : children;\n    }\n\n    return (\n      <Motion\n        style={{\n          ...motionStyle,\n          height: this._spring(collapsed, initialOpen, height, springConfig, minHeight),\n          paddingTop: this._spring(collapsed, initialOpen, paddingTop, springConfig),\n          paddingBottom: this._spring(collapsed, initialOpen, paddingBottom, springConfig),\n        }}\n        defaultStyle={{\n          ...defaultStyle,\n          height,\n          paddingTop,\n          paddingBottom,\n        }}\n      >\n        {style => {\n          if (collapsed && !style.height) {\n            return null;\n          }\n\n          const child = Children.only(children);\n          this._child = child;\n          let nextStyle = child.props.style;\n          if ((collapsed && (!minHeight || style.height !== minHeight)) || style.height !== height) {\n            nextStyle = {\n              ...child.props.style,\n              ...style,\n              overflow: 'hidden',\n            };\n          }\n          return cloneElement(child, {\n            ref: !collapsed && this._setHeight,\n            style: nextStyle,\n          });\n        }}\n      </Motion>\n    );\n  }\n}\n"]}