{"version":3,"sources":["../../src/js/Inks/InkContainer.js"],"names":["InkContainer","state","inks","createInk","pageX","pageY","_createInk","_removeTimeout","setTimeout","_removeInk","props","transitionOverlap","focus","_getKeyboardContainer","_inkContainer","offsetWidth","offsetHeight","x","y","pageOffset","left","top","r","Math","max","ink","size","key","Date","now","slice","push","setState","pop","_container","classList","contains","querySelector","_setContainers","group","parentElement","_initOrRemoveEvents","keyboardDiff","mouseDiff","touchDiff","mouseDisabled","_isListenerDisabled","disabledInteractions","touchDisabled","keyboardDisabled","fn","_handleFocus","_handleKeyDown","getAttribute","window","_handleSubmit","_stopPropagationToFocus","_handleMouseDown","_handleMouseUp","_handleTouchStart","_handleTouchEnd","_maybeDelayClick","waitForInkTransition","_handleRemove","_clicked","click","e","which","keyCode","enter","space","target","addEventListener","_handleBlur","removeEventListener","_skipNextMouse","_mouseLeave","_handleMouseLeave","_aborted","_handleTouchMove","changedTouches","lastInk","length","index","abortedInk","Object","assign","aborted","splice","document","activeElement","type","capture","nextProps","di","ndi","mouseDisabledDiff","_isListenerDisabledDiff","touchDisabledDiff","keyboardDisabledDiff","clearTimeout","interaction","nextDisabledInteractions","i","indexOf","ni","style","className","inkStyle","inkClassName","transitionEnterTimeout","transitionLeaveTimeout","pulse","map","propTypes","object","string","bool","arrayOf","oneOf","number","isRequired","defaultProps"],"mappings":"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","file":"InkContainer.js","sourcesContent":["import React, { PureComponent } from 'react';\nimport { findDOMNode } from 'react-dom';\nimport PropTypes from 'prop-types';\nimport TransitionGroup from 'react-transition-group/TransitionGroup';\nimport cn from 'classnames';\n\nimport { ENTER, SPACE } from '../constants/keyCodes';\nimport isFormPartRole from '../utils/isFormPartRole';\nimport calcPageOffset from '../utils/Positioning/calcPageOffset';\nimport isValidClick from '../utils/EventUtils/isValidClick';\nimport { setTouchEvent, addTouchEvent, removeTouchEvent } from '../utils/EventUtils/touches';\nimport captureNextEvent from '../utils/EventUtils/captureNextEvent';\nimport calculateHypotenuse from '../utils/NumberUtils/calculateHypotenuse';\n\nimport Ink from './Ink';\n\n\n/**\n * The `InkContainer` is used for holding the list of inks that get created by touch,\n * click, or keyboard focus.\n *\n * If the container element has the `type=\"submit\"` attribute, the ink will also be\n * triggered when the user presses enter anywhere in the form.\n */\nexport default class InkContainer extends PureComponent {\n  static propTypes = {\n    style: PropTypes.object,\n    className: PropTypes.string,\n    inkStyle: PropTypes.object,\n    inkClassName: PropTypes.string,\n    waitForInkTransition: PropTypes.bool,\n    disabledInteractions: PropTypes.arrayOf(PropTypes.oneOf(['keyboard', 'mouse', 'touch'])),\n    transitionOverlap: PropTypes.number.isRequired,\n    transitionEnterTimeout: PropTypes.number.isRequired,\n    transitionLeaveTimeout: PropTypes.number.isRequired,\n    pulse: PropTypes.bool,\n  };\n\n  static defaultProps = {\n    transitionOverlap: 150,\n    transitionEnterTimeout: 450,\n    transitionLeaveTimeout: 300,\n  };\n\n  state = { inks: [] };\n\n  componentWillReceiveProps(nextProps) {\n    const { disabledInteractions: di } = this.props;\n    const { disabledInteractions: ndi } = nextProps;\n    if (di === ndi || !this._container) {\n      return;\n    }\n\n    const mouseDisabledDiff = this._isListenerDisabledDiff('mouse', di, ndi);\n    const touchDisabledDiff = this._isListenerDisabledDiff('touch', di, ndi);\n    const keyboardDisabledDiff = this._isListenerDisabledDiff('keyboard', di, ndi);\n    this._initOrRemoveEvents(nextProps, keyboardDisabledDiff, mouseDisabledDiff, touchDisabledDiff);\n  }\n\n  componentWillUnmount() {\n    if (this._removeTimeout) {\n      clearTimeout(this._removeTimeout);\n    }\n\n    if (this._container) {\n      this._initOrRemoveEvents({ disabledInteractions: ['keyboard', 'mouse', 'touch'] });\n      this._getKeyboardContainer().removeEventListener('blur', this._handleBlur);\n    }\n  }\n\n\n  /**\n   * Creates an ink from pageX and pageY coordinates. These values should either come\n   * from the `changedTouches` or just the base event (if clicked). These coordinates\n   * are used to position the ink correctly in the container from touch/click point.\n   * If either value is undefined, an ink will be created from the center of the\n   * container.\n   *\n   * It will also automatically remove the ink.\n   *\n   * @param {number} pageX - The page x coordinate of the click or touch event.\n   * @param {number} pageY - The page y coordinate of the click or touch event.\n   */\n  createInk = (pageX, pageY) => {\n    this._createInk(pageX, pageY);\n    this._removeTimeout = setTimeout(() => {\n      this._removeTimeout = null;\n      this._removeInk();\n    }, this.props.transitionOverlap);\n  };\n\n  /**\n   * Focuses the main element.\n   */\n  focus = () => {\n    this._getKeyboardContainer().focus();\n  };\n\n  _isListenerDisabledDiff(interaction, disabledInteractions, nextDisabledInteractions) {\n    const i = disabledInteractions.indexOf(interaction);\n    const ni = nextDisabledInteractions.indexOf(interaction);\n\n    return (i < 0 && ni >= 0) || (i >= 0 && ni < 0);\n  }\n\n  _isListenerDisabled(interaction, disabledInteractions) {\n    return disabledInteractions && disabledInteractions.indexOf(interaction) !== -1;\n  }\n\n  /**\n   * Creates an ink from pageX and pageY coordinates. These values should either come\n   * from the `changedTouches` or just the base event (if clicked). These coordinates\n   * are used to position the ink correctly in the container from touch/click point.\n   * If either value is undefined, an ink will be created from the center of the\n   * container.\n   *\n   * @param {number} pageX - The page x coordinate of the click or touch event.\n   * @param {number} pageY - The page y coordinate of the click or touch event.\n   */\n  _createInk = (pageX, pageY) => {\n    const { offsetWidth, offsetHeight } = this._inkContainer;\n\n    let x;\n    let y;\n    if (typeof pageX !== 'undefined' && typeof pageY !== 'undefined') {\n      const pageOffset = calcPageOffset(this._inkContainer);\n\n      x = pageX - pageOffset.left;\n      y = pageY - pageOffset.top;\n    } else {\n      x = offsetWidth / 2;\n      y = offsetHeight / 2;\n    }\n\n    const r = Math.max(\n      calculateHypotenuse(x, y),\n      calculateHypotenuse(offsetWidth - x, y),\n      calculateHypotenuse(offsetWidth - x, offsetHeight - y),\n      calculateHypotenuse(x, offsetHeight - y)\n    );\n\n    const ink = {\n      left: x - r,\n      top: y - r,\n      size: r * 2,\n      key: Date.now(),\n    };\n\n    const inks = this.state.inks.slice();\n    inks.push(ink);\n    this.setState({ inks });\n  };\n\n  /**\n   * Removes an ink from the container.\n   */\n  _removeInk = () => {\n    const inks = this.state.inks.slice();\n    inks.pop();\n\n    this.setState({ inks });\n  };\n\n  /**\n   * Gets the container for any keyboard events. This will almost always be the main element,\n   * but text fields will need to be the input itself.\n   */\n  _getKeyboardContainer = () => {\n    if (this._container.classList.contains('md-text-field-container')) {\n      return this._container.querySelector('.md-text-field');\n    }\n\n    return this._container;\n  };\n\n  /**\n   * Sets the ink container and the main container from the ref callback. When the component\n   * is mounting, the keyboard, mouse, and keyboard events will be initialized.\n   */\n  _setContainers = (group) => {\n    if (group !== null) {\n      this._inkContainer = findDOMNode(group);\n      this._container = this._inkContainer.parentElement;\n\n      if (this._container) {\n        this._initOrRemoveEvents(this.props);\n      }\n    }\n  };\n\n  /**\n   * This function will either add or remove the event listeners for creating inks.\n   *\n   * @param {Object} props - The current props to use for figuring out if the events should\n   *    be added or removed.\n   * @param {bool=} keyboardDiff - Boolean if there was a difference between the current props and either\n   *    the previous or next props for the keyboard interactions being disabled.\n   * @param {bool=} mouseDiff - Boolean if there was a difference between the current props and either\n   *    the previous or next props for the mouse interactions being disabled.\n   * @param {bool=} touchDiff - Boolean if there was a difference between the current props and either\n   *    the previous or next props for the touch interactions being disabled.\n   */\n  _initOrRemoveEvents = (props, keyboardDiff = true, mouseDiff = true, touchDiff = true) => {\n    const mouseDisabled = this._isListenerDisabled('mouse', props.disabledInteractions);\n    const touchDisabled = this._isListenerDisabled('touch', props.disabledInteractions);\n    const keyboardDisabled = this._isListenerDisabled('keyboard', props.disabledInteractions);\n\n    if (keyboardDiff) {\n      const fn = `${keyboardDisabled ? 'remove' : 'add'}EventListener`;\n      this._getKeyboardContainer()[fn]('focus', this._handleFocus);\n      this._getKeyboardContainer()[fn]('keydown', this._handleKeyDown);\n\n      if (this._container.getAttribute('type') === 'submit') {\n        window[fn]('submit', this._handleSubmit);\n      }\n\n      if (mouseDiff) {\n        this._container[`${!mouseDisabled ? 'add' : 'remove'}EventListener`]('mousedown', this._stopPropagationToFocus);\n      }\n\n      if (touchDiff) {\n        setTouchEvent(!touchDisabled, this._container, 'start', this._stopPropagationToFocus);\n      }\n    }\n\n    if (mouseDiff) {\n      const fn = `${mouseDisabled ? 'remove' : 'add'}EventListener`;\n      this._container[fn]('mousedown', this._handleMouseDown);\n      this._container[fn]('mouseup', this._handleMouseUp);\n    }\n\n    if (touchDiff) {\n      setTouchEvent(!touchDisabled, this._container, 'start', this._handleTouchStart);\n      setTouchEvent(!touchDisabled, this._container, 'end', this._handleTouchEnd);\n    }\n  };\n\n  _maybeDelayClick = () => {\n    if (!this.props.waitForInkTransition) {\n      return;\n    }\n\n    captureNextEvent('click', this._container);\n  };\n\n  _handleRemove = () => {\n    if (this._clicked && this.props.waitForInkTransition) {\n      // For some reason if the click event will make the ink unmount, it will no longer\n      // have a debug id in the TransitionGroup and it displays a warning. Adding a 1ms timeout\n      // fixes that issue... It only happens on an actual click instead of an enter click.\n      setTimeout(() => {\n        this._container.click();\n      }, 1);\n    }\n\n    this._clicked = false;\n  };\n\n  _handleKeyDown = (e) => {\n    const key = e.which || e.keyCode;\n    const enter = key === ENTER;\n    const space = key === SPACE;\n    // Don't trigger ink when enter key is pressed and the target has an input inside of it (SelectField)\n    if (space || (enter && !isFormPartRole(e.target) && !e.target.querySelector('input'))) {\n      this._clicked = true;\n      this.createInk();\n      this._maybeDelayClick();\n    }\n  };\n\n  _handleFocus = () => {\n    if (this._clicked) {\n      return;\n    }\n\n    this._createInk();\n    this._getKeyboardContainer().addEventListener('blur', this._handleBlur);\n  };\n\n  _handleBlur = () => {\n    this._getKeyboardContainer().removeEventListener('blur', this._handleBlur);\n    this._removeInk();\n  };\n\n  _handleMouseDown = (e) => {\n    this._clicked = true;\n    if (!isValidClick(e) || this._skipNextMouse) {\n      this._skipNextMouse = false;\n      return;\n    }\n\n    this._mouseLeave = false;\n    this._container.addEventListener('mouseleave', this._handleMouseLeave);\n    this._createInk(e.pageX, e.pageY);\n  };\n\n  _handleMouseLeave = () => {\n    this._container.removeEventListener('mouseleave', this._handleMouseLeave);\n    this._mouseLeave = true;\n    this._removeInk();\n  };\n\n  _handleMouseUp = () => {\n    if (this._mouseLeave) {\n      return;\n    }\n\n    this._maybeDelayClick();\n    this._container.removeEventListener('mouseleave', this._handleMouseLeave);\n    this._removeInk();\n  };\n\n  _handleTouchStart = (e) => {\n    this._aborted = false;\n    this._clicked = true;\n    this._skipNextMouse = true;\n    addTouchEvent(window, 'move', this._handleTouchMove);\n\n    const { pageX, pageY } = e.changedTouches[0];\n    this._createInk(pageX, pageY);\n  };\n\n  _handleTouchMove = () => {\n    removeTouchEvent(window, 'move', this._handleTouchMove);\n    const lastInk = this.state.inks[this.state.inks.length - 1];\n    if (!lastInk || Date.now() > (lastInk.key + 200)) {\n      this._aborted = false;\n      return;\n    }\n\n    const inks = this.state.inks.slice();\n    const index = inks.length - 1;\n\n    const abortedInk = Object.assign({}, lastInk, { aborted: true });\n    inks.splice(index, 1, abortedInk);\n\n    this._aborted = true;\n    this.setState({ inks }, this._removeInk);\n  };\n\n  _handleTouchEnd = () => {\n    this._skipNextMouse = true;\n\n    if (this._aborted) {\n      return;\n    } else {\n      removeTouchEvent(window, 'move', this._handleTouchMove);\n    }\n\n    this._removeInk();\n  };\n\n  /**\n   * If a form was submitted that contains the container of the ink and the current focus element\n   * is not the container, trigger an ink effect.\n   *\n   * The current focus check is added so that two inks are not created.\n   */\n  _handleSubmit = (e) => {\n    if (document.activeElement === this._container || !e.target.contains(this._container)) {\n      return;\n    }\n\n    this._maybeDelayClick();\n    this.createInk();\n  };\n\n  _stopPropagationToFocus = (e) => {\n    switch (e.type) {\n      case 'touchstart':\n        addTouchEvent(window, 'end', this._stopPropagationToFocus, { capture: true });\n        break;\n      case 'touchend':\n        removeTouchEvent(window, 'end', this._stopPropagationToFocus, { capture: true });\n        break;\n      case 'mousedown':\n        window.addEventListener('mouseup', this._stopPropagationToFocus, true);\n        break;\n      case 'mouseup':\n        window.removeEventListener('mouseup', this._stopPropagationToFocus, true);\n        break;\n      default:\n    }\n  };\n\n  render() {\n    const {\n      style,\n      className,\n      inkStyle,\n      inkClassName,\n      transitionOverlap,\n      transitionEnterTimeout,\n      transitionLeaveTimeout,\n      pulse,\n    } = this.props;\n    const inks = this.state.inks.map(props => (\n      <Ink\n        {...props}\n        pulse={pulse}\n        style={inkStyle}\n        className={inkClassName}\n        onRemove={this._handleRemove}\n        transitionOverlap={transitionOverlap}\n        transitionEnterTimeout={transitionEnterTimeout}\n        transitionLeaveTimeout={transitionLeaveTimeout}\n      />\n    ));\n\n    return (\n      <TransitionGroup\n        component=\"div\"\n        style={style}\n        className={cn('md-ink-container', className)}\n        ref={this._setContainers}\n      >\n        {inks}\n      </TransitionGroup>\n    );\n  }\n}\n"]}