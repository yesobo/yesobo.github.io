{"version":3,"sources":["../../../src/js/utils/NumberUtils/calculateValueDistance.js"],"names":["calculateValueDistance","calculateDistance","x","width","left","normalize","distance","Math","min","max","scale","step","value","round","decimals","String","split","corrector","length","pow","modded"],"mappings":";;;;;kBA+CwBA,sB;AA/CxB;;AAEA;;;;;;;;;;;;;;;;AAgBA,SAASC,iBAAT,CAA2BC,CAA3B,EAA8BC,KAA9B,EAAqCC,IAArC,EAA2CC,SAA3C,EAAsD;AACpD,MAAMC,WAAWC,KAAKC,GAAL,CACfL,KADe,EAEfI,KAAKE,GAAL,CAAS,CAAT,EAAYP,IAAIE,IAAhB,CAFe,CAAjB;;AAKA,SAAOC,YAAYC,QAAZ,GAAuBA,WAAWH,KAAX,GAAmB,GAAjD;AACD;;AAED;;;;;;;;;;;;;;;;;;;;AAoBe,SAASH,sBAAT,CAAgCE,CAAhC,EAAmCC,KAAnC,EAA0CC,IAA1C,EAAgDM,KAAhD,EAAuDC,IAAvD,EAA6DH,GAA7D,EAAkEC,GAAlE,EAAuEJ,SAAvE,EAAkF;AAC/F,MAAIO,cAAJ;AACA,MAAIN,WAAWL,kBAAkBC,CAAlB,EAAqBC,KAArB,EAA4BC,IAA5B,EAAkCC,SAAlC,CAAf;AACA,MAAIA,SAAJ,EAAe;AACbO,YAAQL,KAAKM,KAAL,CAAWP,YAAYH,QAAQO,KAApB,CAAX,CAAR;AACA,QAAIC,OAAO,CAAX,EAAc;AACZ,UAAMG,WAAWC,OAAOJ,IAAP,EAAaK,KAAb,CAAmB,GAAnB,EAAwB,CAAxB,CAAjB;AACA,UAAMC,YAAY,OAAOH,QAAP,KAAoB,WAApB,IAAmCA,SAASI,MAAT,GAAkB,CAArD,GACdX,KAAKY,GAAL,CAAS,EAAT,EAAaL,SAASI,MAAtB,CADc,GAEd,CAFJ;;AAIA,UAAME,SAAUR,QAAQK,SAAT,IAAuBN,OAAOM,SAA9B,CAAf;AACA,UAAIG,WAAW,CAAX,IAAgBA,UAAUT,OAAO,CAArC,EAAwC;AACtCC,iBAAUD,OAAOS,MAAjB;AACD,OAFD,MAEO,IAAIA,WAAW,CAAf,EAAkB;AACvBR,iBAASQ,MAAT;AACD;AACF;;AAEDd,eAAWM,QAAQF,KAAR,GAAgB,GAA3B;AACAE,YAASA,QAAQD,IAAT,GAAiBH,GAAzB;AACD,GAlBD,MAkBO;AACLI,YAAQJ,MAAMG,OAAOJ,KAAKM,KAAL,CAAWP,WAAW,GAAX,GAAiBI,KAA5B,CAArB;AACD;;AAED,SAAO;AACLJ,cAAUC,KAAKE,GAAL,CAAS,CAAT,EAAYF,KAAKC,GAAL,CAAS,GAAT,EAAcF,QAAd,CAAZ,CADL;AAELM,WAAOL,KAAKE,GAAL,CAASD,GAAT,EAAcD,KAAKC,GAAL,CAASC,GAAT,EAAcG,KAAd,CAAd;AAFF,GAAP;AAID","file":"calculateValueDistance.js","sourcesContent":["/** @module utils/NumberUtils/calculateValueDistance */\n\n/**\n * This calculates the distance from a screen x location to a position in some element\n * by comparing the width of the element and the element's page position to the screen\n * x position.\n *\n * If the distance is not _normalized_ the distance will be updated to be a percentage\n * of the element's total width.\n *\n * @param {Number} x - the screen x location.\n * @param {Number} width - the element's width\n * @param {Number} left - the element's page x position.\n * @param {Boolean} normalize - boolean if the distance should be a percentage.\n *\n * @return {Number} the distance from the element's left position to the page x\n *    location.\n */\nfunction calculateDistance(x, width, left, normalize) {\n  const distance = Math.min(\n    width,\n    Math.max(0, x - left)\n  );\n\n  return normalize ? distance : distance / width * 100;\n}\n\n/**\n * This calculates the new value and distance for a slider. It will compare the page x\n * location of a touch or mouse event to the slider's track page x position. If the\n * final value and distance should be _normalized_, they will be updated to be rounded\n * with the scale and steps in mind.\n *\n * The distance will always be contained within a percentage of 0 - 100 while the\n * value will be contained within the min and max values.\n *\n * @param {Number} x - the page x location of the touch or mouse event.\n * @param {Number} width - the slider's width\n * @param {Number} left - the slider's left position in the page.\n * @param {Number} scale - the total number values included in the slider.\n * @param {Number} step - the amount to increment by.\n * @param {Number} min - the min value for the slider.\n * @param {Number} max - the max value for the slider.\n * @param {Boolean} normalize - boolean if the vaue and distance should be _normalized_.\n *\n * @return {Object} an object with the value and distance.\n */\nexport default function calculateValueDistance(x, width, left, scale, step, min, max, normalize) {\n  let value;\n  let distance = calculateDistance(x, width, left, normalize);\n  if (normalize) {\n    value = Math.round(distance / (width / scale));\n    if (step < 1) {\n      const decimals = String(step).split('.')[1];\n      const corrector = typeof decimals !== 'undefined' && decimals.length > 0\n        ? Math.pow(10, decimals.length)\n        : 1;\n\n      const modded = (value * corrector) % (step * corrector);\n      if (modded !== 0 && modded >= step / 2) {\n        value += (step - modded);\n      } else if (modded !== 0) {\n        value -= modded;\n      }\n    }\n\n    distance = value / scale * 100;\n    value = (value * step) + min;\n  } else {\n    value = min + step * Math.round(distance / 100 * scale);\n  }\n\n  return {\n    distance: Math.max(0, Math.min(100, distance)),\n    value: Math.max(min, Math.min(max, value)),\n  };\n}\n"]}