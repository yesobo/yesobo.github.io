{"version":3,"sources":["../../src/js/Snackbars/Snackbar.js"],"names":["Snackbar","_handleClick","e","props","onDismiss","action","toast","leaveTimeout","multiline","onClick","_fab","_animateForSnackbar","_clearTimeout","_timeout","clearTimeout","_handleAutohide","autohide","autohideTimeout","window","addEventListener","_handleWindowBlur","_eventType","setTimeout","removeEventListener","state","_handleWindowFocus","fab","onAppear","getComposedComponent","className","propId","id","text","Component","btnProps","flat","children","secondary","Object","assign","role","propTypes","oneOfType","number","string","style","object","node","func","isRequired","shape","label","bool"],"mappings":"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","file":"Snackbar.js","sourcesContent":["import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport cn from 'classnames';\n\nimport Button from '../Buttons/Button';\nimport isInvalidAnimate from './isInvalidAnimate';\n\nexport default class Snackbar extends PureComponent {\n  static propTypes = {\n    id: PropTypes.oneOfType([\n      PropTypes.number,\n      PropTypes.string,\n    ]),\n    style: PropTypes.object,\n    className: PropTypes.string,\n    children: PropTypes.node,\n    onDismiss: PropTypes.func.isRequired,\n    toast: PropTypes.shape({\n      text: PropTypes.node.isRequired,\n      action: PropTypes.oneOfType([\n        PropTypes.node,\n        PropTypes.shape({\n          label: PropTypes.node,\n          children: PropTypes.node,\n          onClick: PropTypes.func,\n        }),\n      ]),\n      onAppear: PropTypes.func,\n    }).isRequired,\n    multiline: PropTypes.bool,\n    autohide: PropTypes.bool,\n    autohideTimeout: PropTypes.number,\n    fab: PropTypes.object,\n    leaveTimeout: PropTypes.number.isRequired,\n  };\n\n  componentWillMount() {\n    const { fab, multiline, toast: { onAppear } } = this.props;\n    if (onAppear) {\n      onAppear();\n    }\n\n    if (!fab || isInvalidAnimate(fab)) {\n      return;\n    }\n\n    this._fab = fab.getComposedComponent().getComposedComponent();\n    this._fab._animateForSnackbar(multiline);\n  }\n\n  componentDidMount() {\n    this._handleAutohide();\n  }\n\n  componentWillUnmount() {\n    this._clearTimeout();\n\n    if (this._eventType === 'focus') {\n      window.removeEventListener('focus', this._handleWindowFocus);\n    } else if (this._eventType === 'blur') {\n      window.removeEventListener('blur', this._handleWindowBlur);\n    }\n  }\n\n  _handleClick = (e) => {\n    const { onDismiss, toast: { action }, leaveTimeout, multiline } = this.props;\n    if (typeof action.onClick === 'function') {\n      action.onClick(e);\n    }\n\n    if (this._fab) {\n      this._fab._animateForSnackbar(multiline, leaveTimeout);\n    }\n\n    onDismiss();\n  };\n\n  _clearTimeout = () => {\n    if (this._timeout) {\n      clearTimeout(this._timeout);\n      this._timeout = null;\n    }\n  };\n\n  _handleAutohide = () => {\n    const { autohide, autohideTimeout, onDismiss, multiline, leaveTimeout } = this.props;\n    if (!autohide) {\n      return;\n    }\n\n    window.addEventListener('blur', this._handleWindowBlur);\n    this._eventType = 'blur';\n    this._timeout = setTimeout(() => {\n      this._timeout = null;\n      this._eventType = null;\n\n      window.removeEventListener('blur', this._handleWindowBlur);\n\n      if (this._fab) {\n        this._fab._animateForSnackbar(multiline, leaveTimeout);\n      }\n\n      onDismiss();\n    }, autohideTimeout || this.state.toast);\n  };\n\n  _handleWindowBlur = () => {\n    this._clearTimeout();\n    window.removeEventListener('blur', this._handleWindowBlur);\n    window.addEventListener('focus', this._handleWindowFocus);\n    this._eventType = 'focus';\n  };\n\n  _handleWindowFocus = () => {\n    window.removeEventListener('focus', this._handleWindowFocus);\n    this._eventType = null;\n    this._handleAutohide();\n  };\n\n  render() {\n    const {\n      className,\n      toast,\n      multiline,\n      /* eslint-disable no-unused-vars */\n      id: propId,\n      fab,\n      autohide,\n      autohideTimeout,\n      leaveTimeout,\n      onDismiss,\n      /* eslint-enable no-unused-vars */\n      ...props\n    } = this.props;\n    let { text, action } = toast;\n    let { id } = this.props;\n\n    let Component = 'p';\n    if (action) {\n      Component = 'section';\n      text = <p className=\"md-snackbar--toast md-snackbar--action\">{text}</p>;\n\n      let btnProps = {\n        flat: true,\n        onClick: this._handleClick,\n        children: action,\n        secondary: true,\n        className: 'md-btn--snackbar',\n      };\n\n      if (typeof action !== 'string') {\n        btnProps = Object.assign(btnProps, action, {\n          className: cn(btnProps.className, action.className),\n          onClick: this._handleClick,\n        });\n      }\n\n\n      action = <Button {...btnProps} />;\n    }\n\n    if (!id) {\n      id = `snackbar-alert${action ? '-dialog' : ''}`;\n    }\n\n    const role = `alert${action ? 'dialog' : ''}`;\n    return (\n      <Component\n        {...props}\n        id={id}\n        role={role}\n        className={cn('md-snackbar', {\n          'md-snackbar--multiline': multiline,\n          'md-snackbar--toast': !action,\n        }, className)}\n      >\n        {text}\n        {action}\n      </Component>\n    );\n  }\n}\n"]}