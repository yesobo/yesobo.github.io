{"version":3,"sources":["../../src/js/Snackbars/SnackbarContainer.js"],"names":["CHAINED_TOAST_DELAY","SnackbarContainer","props","visible","toasts","length","state","toast","_initAndToast","nextProps","prevToast","_createLeaveTimer","_createSwapTimer","_initTimeout","clearTimeout","_leaveTimeout","_swapTimeout","_dismissTimeout","multiline","transitionName","transitionEnterTimeout","transitionLeaveTimeout","dismiss","onDismiss","lastChild","portal","propRenderNode","renderNode","context","snackbar","container","_setContainer","propTypes","id","oneOfType","number","string","style","object","className","arrayOf","shape","text","node","isRequired","action","onClick","func","children","label","autohide","bool","autohideTimeout","fab","propName","componentName","location","propFullName","propValue","propType","render","componentNameSafe","propFullNameSafe","Error","defaultProps","contextTypes","_container","_isMultiline","message","document","createElement","classList","add","innerHTML","appendChild","maxWidth","offsetHeight","removeChild","setTimeout","setState","time"],"mappings":"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","file":"SnackbarContainer.js","sourcesContent":["import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport { findDOMNode } from 'react-dom';\nimport CSSTransitionGroup from 'react-transition-group/CSSTransitionGroup';\nimport deprecated from 'react-prop-types/lib/deprecated';\n\nimport getField from '../utils/getField';\nimport TICK from '../constants/CSSTransitionGroupTick';\nimport isInvalidAnimate from './isInvalidAnimate';\nimport Portal from '../Helpers/Portal';\nimport Snackbar from './Snackbar';\n\nconst CHAINED_TOAST_DELAY = 50;\n\n/**\n * The `Snackbar` component is used for displaying a concise and small message to the user about\n * an operation performed.\n *\n * > The main component for the `Snackbar` is actually named the `SnackbarContainer`, so you need\n * to make sure the import is `react-md/lib/Snackbars` or `react-md/lib/Snackbars/SnackbarContainer`.\n * The first import is preferable.\n */\nexport default class SnackbarContainer extends PureComponent {\n  static propTypes = {\n    /**\n     * An id for the Snackbar once a toast has been added and is visible. This is a recommended\n     * prop for accessibility concerns. If it is omitted, the id will become `'snackbar-alert'`\n     * when there is no action on the toast, or `'snackbar-alert-dialog'` when there is an action\n     * on the toast.\n     */\n    id: PropTypes.oneOfType([\n      PropTypes.number,\n      PropTypes.string,\n    ]),\n\n    /**\n     * An optional style to apply to the snackbar once it appears.\n     */\n    style: PropTypes.object,\n\n    /**\n     * An optional className to apply to the snackbar once it appears.\n     */\n    className: PropTypes.string,\n\n    /**\n     * An immutable controlled queue of toasts that should appear in the snackbar.\n     * The snackbar will always display the first toast in this list. When the user has\n     * either clicked the action of the toast, or the `autohideTimeout` has been reached,\n     * the `onDismiss` function will be called. The `onDismiss` function should remove the\n     * first toast and return a new list of remaining toasts.\n     *\n     * ```js\n     * let toasts = [];\n     * const onDismiss = () => {\n     *   const [, ...remainingToasts] = toasts;\n     *   toasts = remainingToasts;\n     * };\n     * ```\n     */\n    toasts: PropTypes.arrayOf(PropTypes.shape({\n      /**\n       * The text to display in the toast.\n       */\n      text: PropTypes.node.isRequired,\n\n      /**\n       * An optional action to take. If this value is a string, the `label` for the\n       * button will be this value, Otherwise, all the keys in the action object will\n       * be applied to the `Button`.\n       */\n      action: PropTypes.oneOfType([\n        PropTypes.node,\n        PropTypes.shape({\n          onClick: PropTypes.func,\n          children: PropTypes.node,\n          // Deprecated\n          label: PropTypes.node,\n        }),\n      ]),\n    })).isRequired,\n\n    /**\n     * A function to call that will dismiss a toast. This will automatically be bound to\n     * any toast that has an `action` and it will also be called when the `autohideTimeout`\n     * has been reached.\n     */\n    onDismiss: PropTypes.func.isRequired,\n\n    /**\n     * Boolean if the snackbar's toasts should automatically be dismissed after the\n     * `autohideTimeout` has been reached.\n     */\n    autohide: PropTypes.bool,\n\n    /**\n     * The amount of time before the snackbar should be dequeued and the next toast\n     * should be displayed.\n     */\n    autohideTimeout: PropTypes.number.isRequired,\n\n    /**\n     * The transition name to use for the snackbar appearing and disappearing.\n     */\n    transitionName: PropTypes.string.isRequired,\n\n    /**\n     * The transition time for the snackbar to enter. This should match the `$md-snackbar-transition-time`\n     * sass variable.\n     */\n    transitionEnterTimeout: PropTypes.number.isRequired,\n\n    /**\n     * The transition time for the snackbar to leave. This should match the `$md-snackbar-transition-time`\n     * sass variable.\n     */\n    transitionLeaveTimeout: PropTypes.number.isRequired,\n\n    /**\n     * When the app contains a floating action button that is fixed to the bottom of the screen,\n     * you should set this to be a ref of the floating action button. When a snackbar appears,\n     * the FAB will be moved to not overlay the snackbar.\n     */\n    fab: (props, propName, componentName, location, propFullName) => {\n      const propValue = props[propName];\n      const propType = typeof propValue;\n\n      if (!propValue) {\n        return null;\n      }\n\n      if (propType !== 'object' || typeof propValue.render !== 'function' || isInvalidAnimate(propValue)) {\n        const componentNameSafe = componentName || '<<anonymous>>';\n        const propFullNameSafe = propFullName || propName;\n        return new Error(\n          `Invalid ${location} \\`${propFullNameSafe}\\` supplied to \\`${componentNameSafe}\\`, expected a ` +\n          'ref to a floating `Button` component. This should not be a DOMElement from `findDOMNode` but instead ' +\n          'the React ref object.'\n        );\n      }\n\n      return null;\n    },\n\n    /**\n     * Boolean if the Portal's functionality of rendering in a separate react tree should be applied\n     * to the snackbar.\n     *\n     * @see {@link Helpers/Portal}\n     */\n    portal: PropTypes.bool,\n\n    /**\n     * An optional DOM node to render the Snackbar in. If this is omitted, it will render as the first\n     * child in the `body`.\n     */\n    renderNode: PropTypes.object,\n\n    /**\n     * Boolean if the snackbar should render as the last child in the `renderNode` or `body` instead of\n     * as the first.\n     */\n    lastChild: PropTypes.bool,\n    dismiss: deprecated(PropTypes.func, 'Use `onDismiss` instead'),\n  };\n\n  static defaultProps = {\n    autohide: true,\n    toasts: [],\n    autohideTimeout: 3000,\n    transitionName: 'md-snackbar',\n    transitionEnterTimeout: 300,\n    transitionLeaveTimeout: 300,\n  };\n\n  static contextTypes = {\n    renderNode: PropTypes.object,\n  };\n\n  constructor(props) {\n    super(props);\n\n    const visible = !!props.toasts.length;\n    this.state = {\n      visible,\n      toast: null,\n    };\n  }\n\n  componentDidMount() {\n    const { toasts } = this.props;\n    if (toasts.length) {\n      this._initAndToast(toasts[0]);\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const [toast] = nextProps.toasts;\n    const [prevToast] = this.props.toasts;\n    if (toast === prevToast || toast === this.state.toast) {\n      return;\n    }\n\n    if (!toast) {\n      this._createLeaveTimer();\n    } else if (!this.state.visible) {\n      this._initAndToast(toast);\n    } else {\n      this._createSwapTimer(toast);\n    }\n  }\n\n  componentWillUnmount() {\n    if (this._initTimeout) {\n      clearTimeout(this._initTimeout);\n    }\n\n    if (this._leaveTimeout) {\n      clearTimeout(this._leaveTimeout);\n    }\n\n    if (this._swapTimeout) {\n      clearTimeout(this._swapTimeout);\n    }\n\n    if (this._dismissTimeout) {\n      clearTimeout(this._dismissTimeout);\n    }\n  }\n\n  _setContainer = (container) => {\n    this._container = findDOMNode(container);\n  };\n\n  /**\n   * This function takes in a new toast object and checks if the message will span\n   * multiple lines of text by creating the new snackbar before the `Snackbar` component\n   * gets made, checking the height of the message, and then removing the temporary\n   * snackbar.\n   */\n  _isMultiline = (toast) => {\n    const container = this._container;\n    if (container === null) {\n      return false;\n    }\n\n    const message = document.createElement('p');\n    message.classList.add('md-snackbar--toast');\n    message.innerHTML = toast.text;\n\n    let snackbar;\n    if (toast.action) {\n      message.classList.add('md-snackbar--action');\n\n      snackbar = document.createElement('section');\n      snackbar.className = 'md-snackbar';\n      snackbar.appendChild(message);\n\n      const action = document.createElement('button');\n      action.innerHTML = typeof toast.action === 'string' ? toast.action : toast.action.label;\n      action.className = 'md-btn md-btn--flat md-btn--text md-btn--snackbar';\n      snackbar.appendChild(action);\n    } else {\n      snackbar = message;\n    }\n\n    // Only style we really want from the .md-snackbar\n    snackbar.style.maxWidth = '568px';\n\n    container.appendChild(snackbar);\n    const multiline = message.offsetHeight > 20;\n    container.removeChild(snackbar);\n\n    return multiline;\n  };\n\n  _initAndToast = (toast) => {\n    this._initTimeout = setTimeout(() => {\n      this._initTimeout = null;\n\n      this.setState({ toast, multiline: this._isMultiline(toast) });\n    }, TICK);\n\n    this.setState({ visible: true });\n  };\n\n  _createLeaveTimer = () => {\n    const { transitionLeaveTimeout: time } = this.props;\n    this._leaveTimeout = setTimeout(() => {\n      this._leaveTimeout = null;\n\n      this.setState({ visible: false });\n    }, time + TICK);\n\n    this.setState({ toast: null });\n  };\n\n  _createSwapTimer = (toast) => {\n    this._swapTimeout = setTimeout(() => {\n      this._swapTimeout = null;\n\n      this.setState({ toast, multiline: this._isMultiline(toast) });\n    }, this.props.transitionLeaveTimeout + CHAINED_TOAST_DELAY);\n\n    this.setState({ toast: null });\n  };\n\n  render() {\n    const { visible, toast, multiline } = this.state;\n    const {\n      transitionName,\n      transitionEnterTimeout,\n      transitionLeaveTimeout,\n      dismiss,\n      onDismiss,\n      lastChild,\n      portal,\n      renderNode: propRenderNode, // eslint-disable-line no-unused-vars\n      toasts, // eslint-disable-line no-unused-vars\n      ...props\n    } = this.props;\n    const renderNode = getField(this.props, this.context, 'renderNode');\n\n    let snackbar;\n    if (toast) {\n      snackbar = (\n        <Snackbar\n          {...props}\n          key=\"snackbar\"\n          leaveTimeout={transitionLeaveTimeout}\n          toast={toast}\n          multiline={multiline}\n          onDismiss={onDismiss || dismiss}\n        />\n      );\n    }\n\n    const container = (\n      <CSSTransitionGroup\n        ref={this._setContainer}\n        key=\"container\"\n        className=\"md-snackbar-container\"\n        transitionName={transitionName}\n        transitionEnterTimeout={transitionEnterTimeout}\n        transitionLeaveTimeout={transitionLeaveTimeout}\n      >\n        {snackbar}\n      </CSSTransitionGroup>\n    );\n\n    if (!portal) {\n      return visible ? container : null;\n    }\n\n    return (\n      <Portal visible={visible} renderNode={renderNode} lastChild={lastChild}>\n        {container}\n      </Portal>\n    );\n  }\n}\n"]}