{"version":3,"sources":["../../src/js/TextFields/TextArea.js"],"names":["TextArea","state","height","getField","_field","getValue","value","focus","blur","_calcRowHeight","props","rows","style","rowHeight","offsetHeight","_setMask","mask","_mask","_setField","field","_handleResize","_rowHeight","_syncHeightWithMask","undefined","scrollHeight","maxRows","Math","min","max","setState","_handleChange","e","target","onChange","nextProps","defaultValue","className","label","block","Object","assign","propTypes","id","string","object","number","isRequired","func","floatingLabel","bool","node"],"mappings":"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","file":"TextArea.js","sourcesContent":["import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport cn from 'classnames';\nimport ResizeObserver from '../Helpers/ResizeObserver';\n\n/**\n * The `TextArea` component is used to allow a dynamic height for the\n * `textarea`. The height will keep on changing until the maxRows prop\n * is met or infinitely if it does not exist, or is 0.\n */\nexport default class TextArea extends PureComponent {\n  static propTypes = {\n    id: PropTypes.string,\n    style: PropTypes.object,\n    className: PropTypes.string,\n    rows: PropTypes.number.isRequired,\n    maxRows: PropTypes.number,\n    onChange: PropTypes.func,\n    defaultValue: PropTypes.string,\n    floatingLabel: PropTypes.bool,\n    value: PropTypes.string,\n    block: PropTypes.bool,\n    label: PropTypes.node,\n  };\n\n  state = { height: null };\n\n  componentDidMount() {\n    this._rowHeight = this._calcRowHeight();\n    this._syncHeightWithMask();\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.rows !== nextProps.rows) {\n      this._rowHeight = this._calcRowHeight(nextProps);\n    }\n\n    if (this.props.value !== nextProps.value || this.props.maxRows !== nextProps.maxRows) {\n      this._syncHeightWithMask(nextProps.value);\n    }\n  }\n\n  getField = () => this._field;\n\n  getValue = () => this._field.value;\n\n  focus = () => {\n    this._field.focus();\n  };\n\n  blur = () => {\n    this._field.blur();\n  };\n\n  _calcRowHeight = ({ rows } = this.props) => {\n    if (!this._field) {\n      return 19;\n    }\n\n    const height = this._field.style.height;\n    this._field.style.height = 'auto';\n    const rowHeight = this._field.offsetHeight / rows;\n    this._field.style.height = height;\n    return rowHeight;\n  };\n\n  _setMask = (mask) => {\n    this._mask = mask;\n  };\n\n  _setField = (field) => {\n    this._field = field;\n  };\n\n  _handleResize = () => {\n    this._rowHeight = this._calcRowHeight();\n    this._syncHeightWithMask();\n  };\n\n  _syncHeightWithMask = (value) => {\n    // The mask is always null in snapshot teseting\n    if (!this._mask) {\n      return;\n    }\n\n    if (value !== undefined) {\n      this._mask.value = value;\n    }\n\n    let height = this._mask.scrollHeight;\n    if (height === undefined) {\n      return;\n    }\n\n    const { rows, maxRows } = this.props;\n    if (maxRows && maxRows > 0) {\n      height = Math.min(height, this._rowHeight * maxRows);\n    }\n\n    height = Math.max(this._rowHeight * rows, height);\n    this.setState({ height });\n  };\n\n  _handleChange = (e) => {\n    this._syncHeightWithMask(e.target.value, e);\n\n    if (this.props.onChange) {\n      this.props.onChange(e);\n    }\n  };\n\n  render() {\n    const { height } = this.state;\n\n    const {\n      style,\n      defaultValue,\n      value,\n      className,\n      label,\n      block,\n      /* eslint-disable no-unused-vars */\n      maxRows,\n      onChange,\n      /* eslint-enable no-unused-vars */\n      ...props\n    } = this.props;\n\n    return (\n      <div\n        style={{ height: height && height + 5 }}\n        className={cn('md-text-field-multiline-container', {\n          'md-text-field--margin': !label && !block,\n          'md-text-field--floating-margin': label && !block,\n        })}\n      >\n        <ResizeObserver watchWidth onResize={this._handleResize} />\n        <textarea\n          ref={this._setMask}\n          className={cn(className, 'md-text-field--multiline-mask')}\n          readOnly\n          rows={props.rows}\n          tabIndex={-1}\n          style={style}\n          defaultValue={defaultValue}\n          aria-hidden\n          value={value}\n        />\n        <textarea\n          {...props}\n          ref={this._setField}\n          style={Object.assign({}, style, { height })}\n          className={className}\n          defaultValue={defaultValue}\n          value={value}\n          onChange={this._handleChange}\n        />\n      </div>\n    );\n  }\n}\n"]}