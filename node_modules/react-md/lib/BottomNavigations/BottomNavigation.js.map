{"version":3,"sources":["../../src/js/BottomNavigations/BottomNavigation.js"],"names":["BottomNavigation","props","visible","initiallyVisible","defaultVisible","state","portalVisible","activeIndex","defaultActiveIndex","dynamic","_addTouchEvents","nextProps","_removeTouchEvents","nextState","onVisibilityChange","_timeout","clearTimeout","className","actions","colored","lastChild","animate","portal","propLinks","links","propActiveIndex","propRenderNode","renderNode","onNavChange","dynamicThreshold","transitionDuration","onChange","containerStyle","containerClassName","transitionName","transitionEnterTimeout","transitionLeaveTimeout","fixed","length","context","navigation","map","action","index","key","_handleNavChange","propTypes","style","object","string","propName","component","args","len","Error","arrayOf","shape","label","node","isRequired","icon","element","iconChildren","iconClassName","oneOfType","func","bool","number","initialActiveIndex","array","defaultProps","contextTypes","window","_handleTouchStart","_handleTouchMove","_handleTouchEnd","_animateIn","setTimeout","setState","_animateOut","e","pageY","changedTouches","_pageY","_scrolling","touchY","passedThreshold","Math","abs"],"mappings":"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","file":"BottomNavigation.js","sourcesContent":["import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport cn from 'classnames';\nimport deprecated from 'react-prop-types/lib/deprecated';\n\nimport getField from '../utils/getField';\nimport controlled from '../utils/PropTypes/controlled';\nimport { addTouchEvent, removeTouchEvent } from '../utils/EventUtils/touches';\nimport Portal from '../Helpers/Portal';\nimport Paper from '../Papers/Paper';\nimport BottomNav from './BottomNav';\n\n/**\n * The `BottomNavigation` component is an alternative to the `NavigationDrawer` for handling navigation\n * only on mobile devices.\n */\nexport default class BottomNavigation extends PureComponent {\n  static propTypes = {\n    /**\n     * An optional style to apply.\n     */\n    style: PropTypes.object,\n\n    /**\n     * An optional className to apply.\n     */\n    className: PropTypes.string,\n\n    /**\n     * A list of objects to generate a bottom navigation link. There must be at least 3 and no more\n     * than 5 links. A link gets rendered as the `AccessibleFakeButton` component, so any additional\n     * props in the link's shape will be passed along.\n     *\n     * ```docgen\n     * PropTypes.arrayOf(PropTypes.shape({\n     *   label: PropTypes.node.isRequired,\n     *   icon: PropTypes.element,\n     *   component: PropTypes.oneOfType([\n     *      PropTypes.func,\n     *      PropTypes.string,\n     *   ]),\n     * }).isRequired\n     * ```\n     */\n    links: (props, propName, component, ...args) => {\n      const links = props[propName] || props.actions;\n      const len = links.length;\n\n      if (len < 3) {\n        return new Error(\n          `Only ${len} \\`${propName}\\` were given to the ${component}. At least 3 are required.`\n        );\n      } else if (len > 5) {\n        return new Error(\n          `${len} \\`${propName}\\` were given to the ${component}. No more than 5 may be given.`\n        );\n      }\n\n      return PropTypes.arrayOf(PropTypes.shape({\n        label: PropTypes.node.isRequired,\n        icon: PropTypes.element,\n        iconChildren: deprecated(PropTypes.node, 'Use `icon` instead'),\n        iconClassName: deprecated(PropTypes.string, 'Use `icon` instead'),\n        component: PropTypes.oneOfType([\n          PropTypes.func,\n          PropTypes.string,\n        ]),\n      })).isRequired(props, propName, component, ...args);\n    },\n\n    /**\n     * Boolean if the bottom navigation should be colored with the primary color or whatever color\n     * was a result of the `react-md-theme-bottom-navigations-colored` mixin.\n     */\n    colored: PropTypes.bool,\n\n    /**\n     * Boolean if the bottom navigation should dynamically appear based on scrolling. When the user\n     * scrolls the `dynamicThreshold` amount, this component will either disappear (scrolling down)\n     * or appear (scrolling up).\n     */\n    dynamic: PropTypes.bool,\n\n    /**\n     * The distance a user must scroll before the bottom navigation appears or disappears when it is `dynamic`.\n     */\n    dynamicThreshold: PropTypes.number.isRequired,\n\n    /**\n     * An optional function to call when a link has been clicked. The callback will\n     * include the new active index and the click event.\n     *\n     * ```js\n     * onNavChange(newActiveIndex, event);\n     * ```\n     */\n    onNavChange: PropTypes.func,\n\n    /**\n     * An optional active index to use. This will make the component controlled and require the\n     * `onNavChange` prop to be defined.\n     */\n    activeIndex: controlled(PropTypes.number, 'onNavChange', 'defaultActiveIndex'),\n\n    /**\n     * The index for the link that is active by default.\n     */\n    defaultActiveIndex: PropTypes.number.isRequired,\n\n    /**\n     * Boolean if the bottom navigation is visible by default. This *should* probably always\n     * be true.\n     */\n    defaultVisible: PropTypes.bool.isRequired,\n\n    /**\n     * The component to render the bottom navigation as.\n     */\n    component: PropTypes.oneOfType([\n      PropTypes.func,\n      PropTypes.string,\n    ]).isRequired,\n\n    /**\n     * Boolean if the Portal's functionality of rendering in a separate react tree should be applied\n     * to the bottom navigation.\n     *\n     * @see {@link Helpers/Portal}\n     */\n    portal: PropTypes.bool,\n\n    /**\n     * Since the `BottomNavigation` component uses the `Portal` component, you can pass an optional\n     * HTML Node to render in.\n     */\n    renderNode: PropTypes.object,\n\n    /**\n     * Boolean if the bottom navigation should render as the last child in the `renderNode` or `body`\n     * instead of as the first.\n     */\n    lastChild: PropTypes.bool,\n\n    /**\n     * The transition duration for the dynamic bottom navigation to appear or disappear. This should\n     * match the `$md-bottom-navigation-transition-time` variable.\n     */\n    transitionDuration: PropTypes.number.isRequired,\n\n    /**\n     * An optional function to call when the visibility of the bottom navigation changes. The callback\n     * will include the new visibility.\n     *\n     * ```js\n     * onVisibilityChange(!visible);\n     * ```\n     */\n    onVisibilityChange: PropTypes.func,\n\n    /**\n     * Boolean if the label on a shifting navigation should animate in and out.\n     */\n    animate: PropTypes.bool,\n\n    onChange: deprecated(PropTypes.func, 'Use `onNavChange` instead'),\n    initiallyVisible: deprecated(PropTypes.bool, 'Use `defaultVisible` instead'),\n    initialActiveIndex: deprecated(PropTypes.number, 'Use `defaultActiveIndex` instead'),\n    containerStyle: deprecated(PropTypes.object, 'Use `style` instead'),\n    containerClassName: deprecated(PropTypes.string, 'Use `className` instead'),\n    transitionName: deprecated(PropTypes.string, 'There is no CSSTransitionGroup used anymore'),\n    transitionEnterTimeout: deprecated(PropTypes.number, 'Use `transitionDuration` instead'),\n    transitionLeaveTimeout: deprecated(PropTypes.number, 'Use `transitionDuration` instead'),\n    actions: deprecated(PropTypes.array, 'Use `links` instead'),\n  };\n\n  static defaultProps = {\n    animate: true,\n    defaultActiveIndex: 0,\n    component: 'footer',\n    defaultVisible: true,\n    transitionDuration: 300,\n    portal: false,\n    dynamicThreshold: 5,\n  };\n\n  static contextTypes = {\n    renderNode: PropTypes.object,\n  };\n\n  constructor(props) {\n    super(props);\n\n    const visible = typeof props.initiallyVisible === 'boolean' ? props.initiallyVisible : props.defaultVisible;\n    this.state = {\n      visible,\n      portalVisible: visible,\n    };\n\n    if (typeof props.activeIndex === 'undefined') {\n      this.state.activeIndex = props.defaultActiveIndex;\n    }\n  }\n\n  componentDidMount() {\n    if (this.props.dynamic) {\n      this._addTouchEvents();\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const { dynamic } = nextProps;\n    if (this.props.dynamic === dynamic) {\n      return;\n    }\n\n    if (dynamic) {\n      this._addTouchEvents();\n    } else {\n      this._removeTouchEvents();\n    }\n  }\n\n  componentWillUpdate(nextProps, nextState) {\n    if (this.state.visible !== nextState.visible && nextProps.onVisibilityChange) {\n      nextProps.onVisibilityChange(nextState.visible);\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.props.dynamic) {\n      this._removeTouchEvents();\n    }\n\n    if (this._timeout) {\n      clearTimeout(this._timeout);\n    }\n  }\n\n  _addTouchEvents = () => {\n    addTouchEvent(window, 'start', this._handleTouchStart);\n    addTouchEvent(window, 'move', this._handleTouchMove);\n    addTouchEvent(window, 'end', this._handleTouchEnd);\n  };\n\n  _removeTouchEvents = () => {\n    removeTouchEvent(window, 'start', this._handleTouchStart);\n    removeTouchEvent(window, 'move', this._handleTouchMove);\n    removeTouchEvent(window, 'end', this._handleTouchEnd);\n  };\n\n  _animateIn = () => {\n    if (this._timeout) {\n      clearTimeout(this._timeout);\n    }\n\n    this._timeout = setTimeout(() => {\n      this._timeout = null;\n      this.setState({ visible: true });\n    }, 17);\n\n    this.setState({ portalVisible: true });\n  };\n\n  _animateOut = () => {\n    if (this._timeout) {\n      clearTimeout(this._timeout);\n    }\n\n    this._timeout = setTimeout(() => {\n      this._timeout = null;\n      this.setState({ portalVisible: false });\n    }, this.props.transitionDuration);\n\n    this.setState({ visible: false });\n  };\n\n  _handleTouchStart = (e) => {\n    const { pageY } = e.changedTouches[0];\n\n    this._pageY = pageY;\n    this._scrolling = true;\n  };\n\n  _handleTouchMove = (e) => {\n    const { visible } = this.state;\n    if (!this._scrolling) {\n      return;\n    }\n\n    const touchY = e.changedTouches[0].pageY;\n    const { dynamicThreshold } = this.props;\n    const passedThreshold = Math.abs(this._pageY - touchY) >= dynamicThreshold;\n    if (this._pageY > touchY && visible && passedThreshold) {\n      this._pageY = touchY;\n      this._animateOut();\n    } else if (this._pageY < touchY && !visible && passedThreshold) {\n      this._pageY = touchY;\n      this._animateIn();\n    }\n  };\n\n  _handleTouchEnd = () => {\n    this._scrolling = false;\n  };\n\n  _handleNavChange = (index, e) => {\n    if (this.props.onNavChange || this.props.onChange) {\n      (this.props.onNavChange || this.props.onChange)(index, e);\n    }\n\n    if (typeof this.props.activeIndex === 'undefined') {\n      this.setState({ activeIndex: index });\n    }\n  };\n\n  render() {\n    const { visible, portalVisible } = this.state;\n    const {\n      className,\n      actions,\n      colored,\n      dynamic,\n      lastChild,\n      animate,\n      portal,\n      /* eslint-disable no-unused-vars */\n      links: propLinks,\n      activeIndex: propActiveIndex,\n      renderNode: propRenderNode,\n      onNavChange,\n      onVisibilityChange,\n      defaultVisible,\n      defaultActiveIndex,\n      dynamicThreshold,\n      transitionDuration,\n\n      // deprecated\n      onChange,\n      initiallyVisible,\n      containerStyle,\n      containerClassName,\n      transitionName,\n      transitionEnterTimeout,\n      transitionLeaveTimeout,\n      /* eslint-enable no-unused-vars */\n      ...props\n    } = this.props;\n\n    let { links } = this.props;\n    if (actions) {\n      links = actions;\n    }\n\n    const fixed = links.length === 3;\n    const activeIndex = getField(this.props, this.state, 'activeIndex');\n    const renderNode = getField(this.props, this.context, 'renderNode');\n    const navigation = (\n      <Paper\n        {...props}\n        key=\"navigation\"\n        className={cn('md-bottom-navigation', {\n          'md-background--card': !colored,\n          'md-background--primary': colored,\n          'md-bottom-navigation--dynamic': dynamic,\n          'md-bottom-navigation--dynamic-inactive': dynamic && !visible,\n        }, className)}\n        role=\"navigation\"\n      >\n        {links.map((action, index) => (\n          <BottomNav\n            {...action}\n            animate={animate}\n            key={action.key || index}\n            index={index}\n            onNavChange={this._handleNavChange}\n            active={activeIndex === index}\n            colored={colored}\n            fixed={fixed}\n          />\n        ))}\n      </Paper>\n    );\n\n    if (!portal) {\n      return portalVisible ? navigation : null;\n    }\n\n    return (\n      <Portal renderNode={renderNode} visible={portalVisible} lastChild={lastChild}>\n        {navigation}\n      </Portal>\n    );\n  }\n}\n"]}