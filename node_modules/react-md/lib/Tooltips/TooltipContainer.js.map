{"version":3,"sources":["../../src/js/Tooltips/TooltipContainer.js"],"names":["getContainer","tooltip","parentNode","TooltipContainer","state","visible","_delayedTimeout","_unlinkTarget","target","_target","_showTooltip","_hideTooltip","removeEventListener","_handleKeyUp","_setTarget","container","_container","props","addEventListener","_setContainers","span","_stopContextMenu","e","preventDefault","window","setState","type","_touched","delay","clearTimeout","setTimeout","which","keyCode","prevProps","style","className","tooltipStyle","tooltipClassName","label","position","enterTimeout","leaveTimeout","propTypes","object","string","node","isRequired","number","func","oneOfType","defaultProps"],"mappings":"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","file":"TooltipContainer.js","sourcesContent":["import React, { PureComponent } from 'react';\nimport { findDOMNode } from 'react-dom';\nimport PropTypes from 'prop-types';\nimport TransitionGroup from 'react-transition-group/TransitionGroup';\nimport cn from 'classnames';\n\nimport { TAB } from '../constants/keyCodes';\nimport captureNextEvent from '../utils/EventUtils/captureNextEvent';\nimport { addTouchEvent, removeTouchEvent } from '../utils/EventUtils/touches';\nimport Tooltip from './Tooltip';\n\n\nfunction getContainer(tooltip) {\n  return tooltip.parentNode;\n}\n\nexport default class TooltipContainer extends PureComponent {\n  static propTypes = {\n    style: PropTypes.object,\n    className: PropTypes.string,\n    tooltipStyle: PropTypes.object,\n    tooltipClassName: PropTypes.string,\n    label: PropTypes.node.isRequired,\n    position: Tooltip.propTypes.position,\n    delay: PropTypes.number,\n    enterTimeout: Tooltip.propTypes.enterTimeout,\n    leaveTimeout: Tooltip.propTypes.leaveTimeout,\n    /**\n     * A function that returns a DOM element that will be used as the tooltip's container.\n     * A ref to the tooltip's DOM element will be passed into the function.\n     */\n    container: PropTypes.func,\n    /**\n     * A component/element the tooltip should be linked to,\n     * or a function that returns such a component/element.\n     * A ref to the tooltip's container will be passed into the function.\n     *\n     * By default the tooltip's container will be used as the target.\n     */\n    target: PropTypes.oneOfType([\n      PropTypes.object,\n      PropTypes.func,\n    ]),\n  };\n\n  static defaultProps = {\n    container: getContainer,\n    delay: 0,\n  };\n\n  state = { visible: false };\n\n  componentDidMount() {\n    this._setTarget();\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.target !== prevProps.target) {\n      this._setTarget();\n    }\n  }\n\n  componentWillUnmount() {\n    this._unlinkTarget();\n    this._target = null;\n\n    if (this._delayedTimeout) {\n      clearTimeout(this._delayedTimeout);\n    }\n  }\n\n  _delayedTimeout = null;\n\n  _unlinkTarget = () => {\n    const target = this._target;\n    if (target) {\n      removeTouchEvent(target, 'start', this._showTooltip);\n      removeTouchEvent(target, 'end', this._hideTooltip);\n      target.removeEventListener('mouseover', this._showTooltip);\n      target.removeEventListener('mouseleave', this._hideTooltip);\n      target.removeEventListener('keyup', this._handleKeyUp);\n      target.removeEventListener('blur', this._hideTooltip);\n    }\n  };\n\n  _setTarget = () => {\n    const container = this._container;\n    let { target } = this.props;\n\n    this._unlinkTarget();\n\n    if (typeof target === 'function') {\n      target = target(container, this);\n    }\n    target = target ? findDOMNode(target) : container;\n    this._target = target || null;\n\n    if (target) {\n      addTouchEvent(target, 'start', this._showTooltip);\n      addTouchEvent(target, 'end', this._hideTooltip);\n      target.addEventListener('mouseover', this._showTooltip);\n      target.addEventListener('mouseleave', this._hideTooltip);\n      target.addEventListener('keyup', this._handleKeyUp);\n      target.addEventListener('blur', this._hideTooltip);\n    }\n  };\n\n  _setContainers = (span) => {\n    if (span) {\n      this._container = this.props.container(span.parentNode, this);\n    }\n  };\n\n  _stopContextMenu = (e) => {\n    e.preventDefault();\n    window.removeEventListener('contextmenu', this._stopContextMenu, true);\n    captureNextEvent('click');\n    this.setState({ visible: true });\n  };\n\n  _showTooltip = (e) => {\n    if (e.type === 'mouseover' && this._touched) {\n      return;\n    }\n\n    if (e.type === 'touchstart') {\n      this._touched = true;\n\n      window.addEventListener('contextmenu', this._stopContextMenu, true);\n      return;\n    }\n\n\n    const { delay } = this.props;\n    if (this._delayedTimeout) {\n      clearTimeout(this._delayedTimeout);\n    }\n\n    if (delay) {\n      this._delayedTimeout = setTimeout(() => {\n        this._delayedTimeout = null;\n\n        this.setState({ visible: true });\n      }, delay);\n    } else {\n      this.setState({ visible: true });\n    }\n  };\n\n  _hideTooltip = (e) => {\n    if (this._delayedTimeout) {\n      clearTimeout(this._delayedTimeout);\n    }\n\n    if (e.type === 'mouseover' && this._touched) {\n      return;\n    }\n\n    this.setState({ visible: false });\n  };\n\n  _handleKeyUp = (e) => {\n    if ((e.which || e.keyCode) === TAB) {\n      this._showTooltip(e);\n    }\n  };\n\n  render() {\n    const { visible } = this.state;\n    const {\n      style,\n      className,\n      tooltipStyle,\n      tooltipClassName,\n      label,\n      position,\n      enterTimeout,\n      leaveTimeout,\n    } = this.props;\n\n    const tooltip = (\n      <Tooltip\n        key=\"tooltip\"\n        style={tooltipStyle}\n        className={tooltipClassName}\n        position={position}\n        enterTimeout={enterTimeout}\n        leaveTimeout={leaveTimeout}\n      >\n        {label}\n      </Tooltip>\n    );\n\n    return (\n      <TransitionGroup\n        style={style}\n        className={cn('md-tooltip-container', className)}\n        component=\"div\"\n      >\n        <span ref={this._setContainers} aria-hidden />\n        {visible ? tooltip : null}\n      </TransitionGroup>\n    );\n  }\n}\n"]}